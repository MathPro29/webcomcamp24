# Payment System - Visual Implementation Guide

## ğŸ—ï¸ Complete System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        PAYMENT SYSTEM OVERVIEW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚   Frontend   â”‚
                          â”‚   (React)    â”‚
                          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                        â”‚                        â”‚
        â–¼                        â–¼                        â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Payment â”‚            â”‚  Login   â”‚            â”‚ Receipts   â”‚
   â”‚  Form   â”‚            â”‚   Form   â”‚            â”‚  (Admin)   â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                      â”‚                      â”‚
        â”‚ 1. GET /check        â”‚ 1. POST /login       â”‚ 1. GET /admin/all
        â”‚ 2. POST /            â”‚ 2. Store JWT         â”‚ 2. Fetch payments
        â”‚ 3. Upload file       â”‚                      â”‚ 3. PUT /:id/status
        â”‚                      â”‚                      â”‚ 4. View/Filter
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚                      â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    Express API     â”‚
                    â”‚    (Port 5000)     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚             â”‚        â”‚        â”‚              â”‚
        â–¼             â–¼        â–¼        â–¼              â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚Auth API â”‚  â”‚ Payment â”‚ â”‚Middlewareâ”‚ â”‚  CORS    â”‚ â”‚  File    â”‚
   â”‚         â”‚  â”‚   API   â”‚ â”‚ (Parser) â”‚ â”‚ (Enable) â”‚ â”‚ Upload   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚    MongoDB      â”‚
            â”‚   Collections   â”‚
            â”‚  - Users        â”‚
            â”‚  - Payments     â”‚
            â”‚  - Others       â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Data Flow Diagram

### User Payment Submission

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   USER PAYMENT SUBMISSION                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Input
   â”‚
   â””â”€> Form Validation
       â”œâ”€ Name not empty âœ“
       â”œâ”€ Phone format (0XXXXXXXXX) âœ“
       â””â”€ File type (JPG/PNG) & size < 5MB âœ“
           â”‚
           â””â”€> GET /api/payments/check
               â”‚
               â”œâ”€ User exists in DB? âœ“
               â””â”€ Payment already submitted?
                   â”‚
                   â”œâ”€ YES â†’ Show error âœ—
                   â””â”€ NO â†’ Continue âœ“
                       â”‚
                       â””â”€> POST /api/payments
                           â”œâ”€ Search user (name + phone)
                           â”œâ”€ Convert file to base64
                           â”œâ”€ Create Payment record
                           â”‚   {
                           â”‚     userId: ObjectId,
                           â”‚     name: "John Doe",
                           â”‚     phone: "0812345678",
                           â”‚     slipImage: "data:image/jpeg;base64,...",
                           â”‚     status: "pending",
                           â”‚     uploadDate: timestamp
                           â”‚   }
                           â”œâ”€ Save to MongoDB
                           â””â”€ Return success response
                               â”‚
                               â””â”€> Show success message âœ“
                                   Reset form
```

### Admin Payment Verification

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               ADMIN PAYMENT VERIFICATION                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Admin Login
   â”‚
   â””â”€> POST /api/auth/login
       â”œâ”€ Verify username/password
       â”œâ”€ Generate JWT token
       â”œâ”€ Set HttpOnly cookie
       â””â”€> Redirect to dashboard
           â”‚
           â””â”€> GET /api/auth/me (session check)
               â”œâ”€ Token valid? âœ“
               â””â”€> Load admin dashboard
                   â”‚
                   â””â”€> Click "à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸¥à¸´à¸›à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™"
                       â”‚
                       â””â”€> GET /api/payments/admin/all
                           â”œâ”€ Fetch all payments
                           â”œâ”€ Populate user details
                           â”œâ”€ Sort by uploadDate
                           â””â”€ Display in table
                               â”‚
                               â”œâ”€ Filter by status
                               â”œâ”€ Search by name/email/phone
                               â”œâ”€ Click slip image
                               â”‚   â””â”€> Show modal with image
                               â”‚
                               â””â”€> Change status dropdown
                                   â”‚
                                   â””â”€> PUT /api/payments/:id/status
                                       â”œâ”€ Update status
                                       â”œâ”€ Add optional note
                                       â”œâ”€ Save to MongoDB
                                       â””â”€> Return updated record
                                           â”‚
                                           â””â”€> UI updates immediately âœ“
                                               New badge shows status
                                               Table reflects change
```

## ğŸ“¦ Component Hierarchy

```
App
â”œâ”€â”€ Routes (React Router)
â”‚   â”œâ”€â”€ MainLayout
â”‚   â”‚   â”œâ”€â”€ Header
â”‚   â”‚   â”œâ”€â”€ Navbar
â”‚   â”‚   â””â”€â”€ Page
â”‚   â”‚       â”œâ”€â”€ Home
â”‚   â”‚       â”œâ”€â”€ RegisterForm
â”‚   â”‚       â”œâ”€â”€ CheckRegistration
â”‚   â”‚       â””â”€â”€ Payment â—„â”€â”€â”€â”€â”€ Payment Form
â”‚   â”‚           â”œâ”€â”€ Bank Account Display
â”‚   â”‚           â”œâ”€â”€ Form Validation
â”‚   â”‚           â”œâ”€â”€ File Upload
â”‚   â”‚           â””â”€â”€ Status Messages
â”‚   â”‚
â”‚   â””â”€â”€ PrivateRoute (Admin Protected)
â”‚       â””â”€â”€ AdminLayout
â”‚           â”œâ”€â”€ Header
â”‚           â”œâ”€â”€ Sidebar â—„â”€â”€â”€â”€â”€ Logout Button
â”‚           â””â”€â”€ Page
â”‚               â”œâ”€â”€ Login â—„â”€â”€â”€â”€â”€ Login Form
â”‚               â”œâ”€â”€ Dashboard â—„â”€ Admin Stats
â”‚               â”œâ”€â”€ Users â—„â”€â”€â”€â”€â”€ User Management
â”‚               â””â”€â”€ Receipts â—„â”€â”€- Payment Verification
â”‚                   â”œâ”€â”€ Search & Filter
â”‚                   â”œâ”€â”€ Payment Table
â”‚                   â”œâ”€â”€ Status Dropdown
â”‚                   â””â”€â”€ Image Modal
â””â”€â”€ NotFound
```

## ğŸ” Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             HTTPONLY JWT AUTHENTICATION                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Admin Login Page
   â”œâ”€ Enter username
   â”œâ”€ Enter password
   â””â”€ Click Login

2. Frontend sends
   â”œâ”€ POST /api/auth/login
   â”œâ”€ Body: { username, password }
   â””â”€ credentials: 'include'

3. Backend processes
   â”œâ”€ Validate credentials
   â”œâ”€ Generate JWT
   â”‚   {
   â”‚     sub: username,
   â”‚     iat: timestamp,
   â”‚     exp: timestamp + 2hours
   â”‚   }
   â”œâ”€ Sign with JWT_SECRET
   â””â”€ Set HttpOnly cookie
       â””â”€ Name: "token"
           Expires: 2 hours
           HttpOnly: true â—„â”€ Cannot be accessed by JS
           Secure: true â—„â”€ HTTPS only (production)

4. Frontend receives
   â”œâ”€ Cookie set automatically
   â”œâ”€ Response: { authenticated: true }
   â””â”€ Redirect to /admin/dashboard

5. On subsequent requests
   â”œâ”€ Browser automatically includes cookie
   â”œâ”€ Frontend sends credentials: 'include'
   â””â”€ Backend verifies token
       â”œâ”€ Valid? âœ“ Allow access
       â””â”€ Invalid? âœ— Redirect to login

6. Logout
   â”œâ”€ POST /api/auth/logout
   â”œâ”€ Backend clears cookie
   â””â”€ Redirect to home
```

## ğŸ“Š Database Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          PAYMENT COLLECTION (MongoDB)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Payment Document:
{
  "_id": ObjectId,                    â—„â”€ Unique ID
  "userId": ObjectId,                 â—„â”€ Reference to User
  "name": "John Doe",                 â—„â”€ User full name
  "phone": "0812345678",              â—„â”€ Phone number
  "slipImage": "data:image/jpeg;base64,...",
                                      â—„â”€ Base64 encoded image
  "uploadDate": ISODate("2024-01-15T10:30:00Z"),
                                      â—„â”€ When uploaded
  "status": "pending",                â—„â”€ pending|approved|rejected
  "note": "Approved by admin",        â—„â”€ Optional note
  "createdAt": ISODate("2024-01-15T10:30:00Z"),
  "updatedAt": ISODate("2024-01-15T10:35:00Z")
}

Status Transitions:
  pending â†’ approved âœ“ (user can see, admin approved)
  pending â†’ rejected âœ“ (user denied, admin rejected)
  approved â†’ pending (can revert if needed)
  rejected â†’ pending (can resubmit)
```

## ğŸ¨ UI Components

### Payment Form
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ğŸ’³ à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™ (Payment)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  à¸—à¸µà¹ˆà¸Šà¸³à¸£à¸°:      à¸˜à¸™à¸²à¸„à¸²à¸£à¸à¸£à¸¸à¸‡à¸à¸ªà¸´à¹„à¸—à¸¢        â”‚
â”‚  à¹€à¸¥à¸‚à¸šà¸±à¸à¸Šà¸µ:    [1234567890] [Copy]   â”‚
â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™                  â”‚â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ à¸Šà¸·à¹ˆà¸­-à¸™à¸²à¸¡à¸ªà¸à¸¸à¸¥*                    â”‚â”‚
â”‚  â”‚ [_____________________]          â”‚â”‚
â”‚  â”‚                                  â”‚â”‚
â”‚  â”‚ à¹€à¸šà¸­à¸£à¹Œà¹‚à¸—à¸£*                         â”‚â”‚
â”‚  â”‚ [___________] [à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸‚à¹‰à¸­à¸¡à¸¹à¸¥]    â”‚â”‚
â”‚  â”‚                                  â”‚â”‚
â”‚  â”‚ à¸ªà¸¥à¸´à¸›à¸à¸²à¸£à¹‚à¸­à¸™à¹€à¸‡à¸´à¸™*                   â”‚â”‚
â”‚  â”‚ [Image Upload] [Preview]         â”‚â”‚
â”‚  â”‚                                  â”‚â”‚
â”‚  â”‚ [âœ“] à¸¢à¸·à¸™à¸¢à¸±à¸™à¸§à¹ˆà¸²à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¹€à¸£à¸µà¸¢à¸šà¸£à¹‰à¸­à¸¢      â”‚â”‚
â”‚  â”‚                                  â”‚â”‚
â”‚  â”‚ [à¸¢à¸·à¸™à¸¢à¸±à¸™à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™] â–º Status      â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Admin Receipts Page
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸šà¸ªà¸¥à¸´à¸›à¸à¸²à¸£à¸Šà¸³à¸£à¸°à¹€à¸‡à¸´à¸™ (Admin)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                  â”‚
â”‚ Stats Dashboard:                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ âœ“ à¸­à¸™à¸¸à¸¡à¸±à¸•à¸´   â”‚ â”‚ â± à¸£à¸­à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š â”‚ â”‚ âœ— à¸›à¸à¸´à¹€à¸ªà¸˜   â”‚  â”‚
â”‚ â”‚ 42 à¸£à¸²à¸¢à¸à¸²à¸£  â”‚ â”‚ 15 à¸£à¸²à¸¢à¸à¸²à¸£  â”‚ â”‚ 3 à¸£à¸²à¸¢à¸à¸²à¸£   â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                  â”‚
â”‚ Search: [____________________]                  â”‚
â”‚ Status: [All â–¼] [Refresh]                      â”‚
â”‚                                                  â”‚
â”‚ Selected: 0 [Approve All]                      â”‚
â”‚                                                  â”‚
â”‚ â”Œâ”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚âœ“â”‚ Name    â”‚Phone â”‚Slip  â”‚Date  â”‚Statusâ”‚Actionâ”‚
â”‚ â”œâ”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚ â”‚ John D. â”‚0812..â”‚[IMG] â”‚1/15  â”‚[v]   â”‚ğŸ‘ â¬‡ â”‚
â”‚ â”‚ â”‚ jane@.. â”‚      â”‚      â”‚10:30 â”‚pending   â”‚   â”‚
â”‚ â”œâ”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”‚ â”‚ Jane S. â”‚0898..â”‚[IMG] â”‚1/14  â”‚[âœ“]   â”‚ğŸ‘ â¬‡ â”‚
â”‚ â”‚ â”‚ jane@.. â”‚      â”‚      â”‚15:45 â”‚approved  â”‚   â”‚
â”‚ â””â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                  â”‚
â”‚ Modal (Click on image):                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ à¸Šà¸·à¹ˆà¸­: John Doe      à¹€à¸šà¸­à¸£à¹Œ: 0812345678    â”‚  â”‚
â”‚ â”‚ à¸§à¸±à¸™à¸—à¸µà¹ˆ: 15 à¸¡.à¸„. 2567  à¸ªà¸–à¸²à¸™à¸°: â± à¸£à¸­à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š â”‚  â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚ â”‚ â”‚ [Bank Slip Image Preview]          â”‚  â”‚  â”‚
â”‚ â”‚ â”‚ (base64 encoded, displayed inline) â”‚  â”‚  â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚ â”‚ [âœ“ Approve] [âœ— Reject] [â¬‡ Download]    â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ API Endpoints Reference

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             API ENDPOINTS (Port 5000)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Auth Endpoints:
  POST /api/auth/login              â—„â”€ Login with credentials
  GET  /api/auth/me                 â—„â”€ Check session
  POST /api/auth/logout             â—„â”€ Clear session

Payment Endpoints:
  GET  /api/payments/check?name=...&phone=...
                                    â—„â”€ Check if payment exists
  POST /api/payments                â—„â”€ Upload payment slip
  GET  /api/payments/admin/all      â—„â”€ Fetch all (admin only)
  PUT  /api/payments/:id/status     â—„â”€ Update status (admin only)

Example Requests:

1. Check Payment
   GET /api/payments/check?name=John&phone=0812345678
   Response: { "exists": false }

2. Upload Payment
   POST /api/payments
   Body: FormData {
     name: "John Doe",
     phone: "0812345678",
     slip: <File>
   }
   Response: { "success": true, "payment": {...} }

3. Get All Payments
   GET /api/payments/admin/all
   Response: [
     {
       "id": "...",
       "userName": "John Doe",
       "email": "john@...",
       "phone": "0812345678",
       "slipImage": "data:image/jpeg;base64,...",
       "status": "pending",
       "uploadDate": "2024-01-15T10:30:00Z",
       "note": ""
     },
     ...
   ]

4. Update Status
   PUT /api/payments/507f191e810c19729de860ea/status
   Body: { "status": "approved", "note": "Verified" }
   Response: { "success": true, "payment": {...} }
```

## ğŸ“± Mobile Responsiveness

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         MOBILE LAYOUT (375px)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                      â”‚
â”‚  ğŸ“± Payment Form (Stacked)           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Payment Information          â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Bank: à¸˜à¸™à¸²à¸„à¸²à¸£à¸à¸£à¸¸à¸‡à¸à¸ªà¸´à¹„à¸—à¸¢         â”‚   â”‚
â”‚  â”‚ Account: 1234... [Copy]      â”‚   â”‚
â”‚  â”‚                              â”‚   â”‚
â”‚  â”‚ [Input: Name]                â”‚   â”‚
â”‚  â”‚ [Input: Phone] [Check]       â”‚   â”‚
â”‚  â”‚ [File Upload]                â”‚   â”‚
â”‚  â”‚ [Checkbox]                   â”‚   â”‚
â”‚  â”‚ [Submit Button]              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                      â”‚
â”‚  ğŸ‘¨â€ğŸ’¼ Admin Receipts (Cards)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Statistics (3 Cards Stacked) â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ [Search]                     â”‚   â”‚
â”‚  â”‚ [Status Filter]              â”‚   â”‚
â”‚  â”‚ [Refresh]                    â”‚   â”‚
â”‚  â”‚                              â”‚   â”‚
â”‚  â”‚ â”Œâ”€ Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚ â”‚ Name: John            â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ Phone: 0812...        â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ [Image]               â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ Status: [Dropdown]    â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ [View] [Download]     â”‚   â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚ â”Œâ”€ Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚ â”‚ Name: Jane            â”‚   â”‚   â”‚
â”‚  â”‚ â”‚ ...                   â”‚   â”‚   â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âœ… Testing Scenarios

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            TESTING SCENARIOS                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Scenario 1: Successful Payment Upload
â”œâ”€ Input: John Doe, 0812345678, slip.jpg
â”œâ”€ Check: GET /check â†’ { exists: false }
â”œâ”€ Upload: POST / â†’ { success: true }
â”œâ”€ Verify: Payment appears in admin panel
â””â”€ Status: PASS âœ“

Scenario 2: Duplicate Payment Prevention
â”œâ”€ Upload: John Doe, 0812345678 (first time)
â”œâ”€ Result: Success
â”œâ”€ Upload: John Doe, 0812345678 (second time)
â”œâ”€ Check: GET /check â†’ { exists: true }
â”œâ”€ Result: Error shown
â””â”€ Status: PASS âœ“

Scenario 3: Admin Status Update
â”œâ”€ Login: admin/admin123
â”œâ”€ Navigate: Admin Receipts
â”œâ”€ Action: Change status to "approved"
â”œâ”€ Request: PUT /:id/status â†’ { success: true }
â”œâ”€ Verify: UI updates, database saved
â””â”€ Status: PASS âœ“

Scenario 4: Invalid File Upload
â”œâ”€ Select: document.pdf (not allowed)
â”œâ”€ Result: Error message shown
â”œâ”€ Select: image.jpg (5.1 MB, too large)
â”œâ”€ Result: Error message shown
â”œâ”€ Select: slip.jpg (valid)
â”œâ”€ Result: Success message
â””â”€ Status: PASS âœ“

Scenario 5: Session Timeout
â”œâ”€ Login: success, receive token
â”œâ”€ Wait: 2 hours pass
â”œâ”€ Action: Try to access admin page
â”œâ”€ Check: GET /auth/me â†’ fails
â”œâ”€ Redirect: Back to login
â””â”€ Status: PASS âœ“
```

---

This visual guide provides a complete overview of the payment system architecture, data flow, components, and testing scenarios. All components are fully implemented and ready for deployment.
